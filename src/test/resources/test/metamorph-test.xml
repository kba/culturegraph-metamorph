<?xml version="1.1" encoding="UTF-8"?>
<metamorph-test version="1.0" 
	xmlns="http://www.culturegraph.org/metamorph-test">
	
	<test-case name="Single fully defined entity">
		<input type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="default" value="part-1 / part-2" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</input>
		
		<transformation type="text/x-metamorph+xml" src="metamorph-test-duplicates" />

		
		<result type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="full" value="part-1 (part-2)" />
							<literal name="part1" value="part-1" />
							<literal name="part2" value="part-2" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</result>
	</test-case>

	<test-case name="Single partially defined entity">
		<input type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="default" value="part-1" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</input>
		
		<transformation src="metamorph-test-duplicates" type="text/x-metamorph+xml"/>
		
		<result type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="full" value="part-1 ()" />
							<literal name="part1" value="part-1" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</result>
	</test-case>
	
	<test-case name="Multiple fully defined entities">
		<input type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="default" value="part-a-1 / part-a-2" />
						</entity> 
						<entity name="name">
							<literal name="default" value="part-b-1 / part-b-2" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</input>
		
		<transformation src="metamorph-test-duplicates" type="text/x-metamorph+xml"/>
		
		<result type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="full" value="part-a-1 (part-a-2)" />
							<literal name="part1" value="part-a-1" />
							<literal name="part2" value="part-a-2" />
						</entity> 
						<entity name="name">
							<literal name="full" value="part-b-1 (part-b-2)" />
							<literal name="part1" value="part-b-1" />
							<literal name="part2" value="part-b-2" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</result>
		
	</test-case>
	
	<test-case name="Multiple partially defined entities">
		<input type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="default" value="part-a-1" />
						</entity> 
						<entity name="name">
							<literal name="default" value="part-b-1" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</input>
				
		<transformation src="metamorph-test-duplicates" type="text/x-metamorph+xml"/>
		
		<result type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="full" value="part-a-1 ()" />
							<literal name="part1" value="part-a-1" />
						</entity> 
						<entity name="name">
							<literal name="full" value="part-b-1 ()" />
							<literal name="part1" value="part-b-1" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</result>
	</test-case>
	
	<test-case name="Fully and partially defined entities">
		<input type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="default" value="part-a-1 / part-a-2" />
						</entity> 
						<entity name="name">
							<literal name="default" value="part-b-1" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</input>
			
		<transformation src="metamorph-test-duplicates" type="text/x-metamorph+xml"/>
		
		<result type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="full" value="part-a-1 (part-a-2)" />
							<literal name="part1" value="part-a-1" />
							<literal name="part2" value="part-a-2" />
						</entity> 
						<entity name="name">
							<literal name="full" value="part-b-1 ()" />
							<literal name="part1" value="part-b-1" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</result>
	</test-case>
	
	<test-case name="Partially and fully defined entities">
		<input type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="default" value="part-a-1" />
						</entity> 
						<entity name="name">
							<literal name="default" value="part-b-1 / part-b-2" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</input>
			
		<transformation src="metamorph-test-duplicates" type="text/x-metamorph+xml"/>
		
		<result type="text/x-cg+xml">
			<cgxml version="1.0" xmlns="http://www.culturegraph.org/cgxml">
				<records>
					<record id="1">
						<entity name="name">
							<literal name="full" value="part-a-1 ()" />
							<literal name="part1" value="part-a-1" />
						</entity> 
						<entity name="name">
							<literal name="full" value="part-b-1 (part-b-2)" />
							<literal name="part1" value="part-b-1" />
							<literal name="part2" value="part-b-2" />
						</entity> 
					</record>
				</records>
			</cgxml>
		</result>
	</test-case>
	
</metamorph-test>