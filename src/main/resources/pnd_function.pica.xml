<?xml version="1.0" encoding="UTF-8"?>
<metamorph xmlns="http://www.culturegraph.org/metamorph"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:my="http://www.dnb.de/myfunctions"
	xsi:schemaLocation="
		http://www.culturegraph.org/metamorph metamorph.xsd"
	entityMarker=".">

	<name>Umsetzung der PND</name>


	<function name="my:compose" class="org.culturegraph.metamorph.functions.Compose"/>

	<group name="rdaGr2:identifierForThePerson">
		<data source="007Q.0">
			<compose prefix="(DE-588c)" />
		</data>
		<data source="007T.0">
			<compose prefix="(DLC)" />
		</data>
		<data source="003@.0">
			<compose prefix="(DE-588a)" />
		</data>
	</group>


	<data source="028A.a" name="surname" >
		<my:compose prefix="GURK"/>
	</data>
	


	<collect-literal name="gnd:variantNameForThePerson"
		value="${surname}${forename}${prefix}${personalname}${qualifier}"
		forceOnEnd="028A">
		<data source="028A.a" name="surname" />
		<data source="028A.d" name="forename">
			<compose prefix=", " />
		</data>
		<data source="028A.c" name="prefix">
			<compose prefix=" " />
		</data>
		<data source="028A.l" name="qualifier">
			<compose prefix=" &lt;" postfix="&gt;" />
		</data>
		<data source="028A.5" name="personalname" />
	</collect-literal>

	<data name="rdaGr2:dateOfBirth" source="032Aa.a">
		<replace pattern=" " with="" />
		<regexp match="((\d*?))-" format="${1}" />
	</data>

	<data name="rdaGr2:dateOfDeath" source="032Aa.a">
		<replace pattern=" " with="" />
		<regexp match="-((\d*?))$" format="${1}" />
	</data>



</metamorph>
